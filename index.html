<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ConsistCompose-Image â€” Gallery</title>
<style>
  :root{
    --bg:#0b0f19;
    --text:#e6e9ef;
    --muted:#9aa3b2;
    --card:#111827;
    --border:#1f2937;
    --shadow: 0 10px 30px rgba(0,0,0,.35);
    --blue:#60a5fa; --pink:#fb72c3; --violet:#a78bfa;
    --maxw:1200px; --radius:20px;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{
    height:100%;
    background:var(--bg);
    color:var(--text);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  }
  a{color:var(--blue); text-decoration:none}
  a:hover{text-decoration:underline}

  /* ====== æ•´å±ç¿»é¡µ ====== */
  .snap-container{
    height:100vh; overflow-y:auto; overflow-x:hidden;
    scroll-snap-type:y mandatory;
    scroll-behavior:smooth;
    position:relative; z-index:0;
  }
  section.snap{
    min-height:100vh;
    scroll-snap-align:start;
    position:relative; z-index:0;
    display:flex; align-items:center; justify-content:center;
    padding:24px;
    overflow:hidden;
  }

  .inner{ width:100%; max-width:var(--maxw); padding:24px; }
  .card{
    background:var(--card);
    border:1px solid var(--border);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
  }

  /* ====== ç»Ÿè®¡é¡µ ====== */
  .stats-grid{display:grid; gap:24px; grid-template-columns:repeat(1,minmax(0,1fr));}
  @media(min-width:900px){ .stats-grid{grid-template-columns:repeat(3,1fr);} }
  .stat-card{padding:24px}
  .stat-title{font-weight:800; text-align:center; margin-bottom:12px}
  .ring{ width:min(260px,60vw); height:min(260px,60vw); margin:0 auto; position:relative; }
  .ring canvas{position:absolute; inset:0}
  .ring .center{position:absolute; inset:0; display:grid; place-items:center; font-weight:800; font-size:28px}
  .ring .center small{display:block; color:var(--muted); font-weight:600; font-size:12px; margin-top:4px}

  /* ====== æ ·ä¾‹é¡µï¼ˆå¯å¤ç”¨ï¼‰ ====== */
  .gallery{display:grid; gap:18px; grid-template-columns:repeat(2,1fr)}
  @media(min-width:900px){ .gallery{grid-template-columns:repeat(4,1fr)} }
  .thumb{width:100%; aspect-ratio:1/1; object-fit:cover; border-radius:16px; border:1px solid var(--border); background:#0f172a}

  /* ====== å³ä¾§å¯¼èˆªç‚¹ ====== */
  .dots{position:fixed; right:16px; top:50%; transform:translateY(-50%); display:grid; gap:10px; z-index:50}
  .dot{width:10px;height:10px;border-radius:50%; background:#334155; border:1px solid #64748b; cursor:pointer; transition:.2s}
  .dot.active{background:#93c5fd; border-color:#93c5fd; box-shadow:0 0 0 4px rgba(147,197,253,.2)}
  .dot:hover{transform:scale(1.12)}

  /* å°æ ‡é¢˜è£…é¥° */
  .section-title {
    display:flex; align-items:center; gap:10px; margin:8px 0 18px;
    font-size:28px; font-weight:800;
  }
  .section-title::before{
    content:""; width:8px; height:26px; border-radius:8px;
    background:linear-gradient(180deg,#fb72c3,#a78bfa);
  }
  .fullbleed { width:100%; max-width:1200px; margin:0 auto; padding:0 24px; }

  /* ===== æ™®é€š ticker çš„åŸºç¡€æ ·å¼ï¼ˆä½œä¸ºç´ ææ± å­˜åœ¨ï¼‰ ===== */
  .ticker { position:relative; overflow:hidden; }
  .ticker .track{
    display:inline-flex;
    align-items:center;
    gap:22px;
    flex-wrap:nowrap;
    white-space:nowrap;
  }

  /* ===== tile / bundle ===== */
  .tile{
    border-radius:16px; border:1px solid var(--border);
    background:#0f172a; overflow:hidden;
    height: clamp(140px, 24vh, 260px);
    width:  clamp(140px, 24vh, 260px);
    transform: translateY(var(--y,0));
  }
  .tile img{ width:100%; height:100%; object-fit:cover; display:block; }

  .bundle{
    display:flex;
    gap:12px;
    padding:12px;
    border:1px solid var(--border);
    border-radius:16px;
    background:#0f172a;
    box-shadow:var(--shadow);
    width:auto;
    height:auto;
  }
  .bundle .cell{
    position:relative;
    width: clamp(120px, 16vw, 180px);
    aspect-ratio: 1 / 1;
    border:1px solid var(--border);
    border-radius:14px;
    overflow:hidden;
  }
  .bundle img{
    width:100%;
    height:100%;
    object-fit:cover;
    display:block;
    background:#0f172a;
    cursor:zoom-in;
  }

  .badge{ display:none !important; }
  .row-gap { margin-top: 16px; }

  /* ===== Lightbox ===== */
  .lb{
    position:fixed; inset:0; background:rgba(0,0,0,.75);
    display:none; align-items:center; justify-content:center;
    z-index:100; padding:24px;
  }
  .lb.open{ display:flex; }
  .lb img{
    max-width:min(92vw,1400px);
    max-height:86vh;
    border-radius:16px; border:1px solid var(--border); background:#0f172a;
    box-shadow:0 20px 60px rgba(0,0,0,.5);
  }
  .lb-close{
    position:fixed; top:16px; right:20px; font-size:28px; line-height:1;
    color:#e6e9ef; cursor:pointer; user-select:none;
    background:rgba(17,24,39,.6); border:1px solid var(--border);
    padding:6px 12px; border-radius:12px;
  }

  /* ===== HERO ===== */
  .hero-content { position:relative; z-index:1; color:#fff; text-align:center; }
  .hero-content h1{ font-size:clamp(36px,6vw,72px); line-height:1.05; font-weight:900; letter-spacing:.3px; }
  .hero-content p{ margin-top:12px; font-size:clamp(16px,2.2vw,22px); color:#cbd5e1; }
  .hero-buttons{ margin-top:20px; display:flex; gap:12px; justify-content:center; flex-wrap:wrap; }
  .hero-buttons .btn{
    display:inline-flex; align-items:center; gap:8px; padding:10px 16px;
    border:1px solid var(--border, #334155); border-radius:999px;
    background:#0f172a; color:#fff; text-decoration:none;
  }
  .hero-buttons .btn:hover{ background:#111827; }

  .snap.hero-landing{ min-height:100vh; padding:0; margin:0; position:relative; isolation:isolate; overflow:hidden; z-index:0; }
  .hero-logo{ width:88px; height:88px; border-radius:18px; display:inline-block; margin-bottom:16px; }

  /* ===== æ‚¬åœæ”¾å¤§ ===== */
  .tile img:hover,
  .bundle img:hover {
    transform: scale(1.05);
    transition: transform 0.25s ease;
  }

  /* ===== å­å¼¹æµï¼šéšè—ç´ æè½¨é“ + è½¨é“/å¼¹ä½“æ ·å¼ ===== */
  .ticker.shoot .track{ display:none; }  /* ç´ ææ± åªç”¨äºå…‹éš†ï¼Œä¸æ˜¾ç¤º */
  .ticker.shoot { position: relative; overflow: hidden; height: var(--shoot-h, 260px); }
  .ticker.shoot .lane { position: relative; width: 100%; height: 100%; }
  .ticker.shoot .bolt {
    position: absolute; top: 50%; left: 100%;
    transform: translate3d(0,-50%,0); will-change: transform; backface-visibility: hidden;
  }
  .ticker.shoot .bolt img { display:block; width:100%; height:100%; object-fit:cover; }
  .ticker.shoot:hover .bolt { animation-play-state: paused; }
  @keyframes bullet {
    from { transform: translate3d(0,-50%,0); }
    to   { transform: translate3d(calc(-100vw - var(--w, 300px)),-50%,0); }
  }

  /* ===== å…¨ç«™å›ºå®šèƒŒæ™¯ï¼šä¸€å¼ å›¾ ===== */
  body{ background:transparent; }
  body::before{
    content:""; position:fixed; inset:0; z-index:-1;
    background-image:
      linear-gradient(to top, rgba(10,10,20,0.85), rgba(10,10,20,0.15)),
      url("assets/logo.png");
    background-size:cover; background-position:center; background-repeat:no-repeat;
  }

  /* ====== compose-demoï¼ˆæ»‘åŠ¨ç‰ˆï¼‰å‘½åç©ºé—´ï¼šcd_* ====== */
  .compose-demo{ max-width:1200px; margin:0 auto; padding:0 24px; }
  .compose-stage{ display:grid; grid-template-columns:1fr 1fr; gap:16px; }
  .compose-pane{
    position:relative; height: clamp(280px, 52vh, 420px);
    border:1px solid var(--border); border-radius:16px; overflow:hidden;
    background:#0f172a; box-shadow:var(--shadow);
  }
  .compose-layer{ position:absolute; inset:0; background-size:cover; background-position:center; background-repeat:no-repeat; opacity:0; transform:translateX(0); }
  .compose-stage{ --dur:12s; }

  .compose-pane.left  .bg     { background-image:var(--bg);     animation:cd_L_bg    var(--dur) ease-in-out infinite; }
  .compose-pane.left  .bgbox  { background-image:var(--bgbox);  animation:cd_L_bgbox var(--dur) ease-in-out infinite; }
  .compose-pane.left  .output { background-image:var(--out);    animation:cd_L_out   var(--dur) ease-in-out infinite; }
  .compose-pane.right .bgbox  { background-image:var(--bgbox);  animation:cd_R_bgbox var(--dur) ease-in-out infinite; }
  .compose-pane.right .object { background-image:var(--obj);    animation:cd_R_obj   var(--dur) ease-in-out infinite; }
  .compose-pane.right .outbox { background-image:var(--outbox); animation:cd_R_outbx var(--dur) ease-in-out infinite; }

  @keyframes cd_L_bg{0%{opacity:1}18%{opacity:1}28%{opacity:0}100%{opacity:0}}
  @keyframes cd_L_bgbox{0%{opacity:0}18%{opacity:0}22%{opacity:1}42%{opacity:1}52%{opacity:0}100%{opacity:0}}
  @keyframes cd_L_out{0%{opacity:0}48%{opacity:0}60%{opacity:1}90%{opacity:1}100%{opacity:0}}
  @keyframes cd_R_bgbox{
    0%{opacity:0;transform:translateX(24px)} 10%{opacity:1;transform:translateX(0)}
    28%{opacity:1} 34%{opacity:0} 100%{opacity:0}
  }
  @keyframes cd_R_obj{
    0%{opacity:0;transform:translateX(24px)} 26%{opacity:0;transform:translateX(24px)}
    32%{opacity:1;transform:translateX(0)} 48%{opacity:1;transform:translateX(0)}
    60%{opacity:0;transform:translateX(-120%)} 100%{opacity:0;transform:translateX(-120%)}
  }
  @keyframes cd_R_outbx{
    0%{opacity:0;transform:translateX(24px)} 58%{opacity:0;transform:translateX(24px)}
    68%{opacity:1;transform:translateX(0)} 90%{opacity:1} 100%{opacity:0}
  }
  .compose-caption{ display:flex; justify-content:space-between; align-items:center; font-weight:700; margin:10px 2px 0; color:var(--muted); font-size:.92rem; }

  /* ====== s1ï¼šå››æ­¥æ·¡å…¥ç‰ˆ å‘½åç©ºé—´ï¼šs1_* ====== */
  .s1-stage{ --dur:12s; display:grid; grid-template-columns:1fr 1fr; gap:16px; }
  .s1-pane{
    position:relative; height:clamp(280px,52vh,420px);
    border:1px solid var(--border); border-radius:16px; overflow:hidden;
    background:#0f172a; box-shadow:var(--shadow);
  }
  .s1-layer{ position:absolute; inset:0; background-size:cover; background-position:center; opacity:0; will-change:opacity; }

  .s1-pane.left  .bg    { background-image:var(--bg);    animation:s1_L_bg    var(--dur) ease-in-out infinite; }
  .s1-pane.left  .bgbox { background-image:var(--bgbox); animation:s1_L_bgbox var(--dur) ease-in-out infinite; }
  .s1-pane.left  .out   { background-image:var(--out);   animation:s1_L_out   var(--dur) ease-in-out infinite; }

  .s1-pane.right .sub         { background-image:var(--sub);   animation:s1_R_sub    var(--dur) ease-in-out infinite; }
  .s1-pane.right .bgboxghost  { background-image:var(--bgbox); animation:s1_R_bgbox  var(--dur) ease-in-out infinite; }
  .s1-pane.right .outbx       { background-image:var(--outbx); animation:s1_R_outbx  var(--dur) ease-in-out infinite; }

  @keyframes s1_L_bg{0%{opacity:0}10%{opacity:1}30%{opacity:1}34%{opacity:0}100%{opacity:0}}
  @keyframes s1_L_bgbox{0%{opacity:0}36%{opacity:0}42%{opacity:1}54%{opacity:1}58%{opacity:0}100%{opacity:0}}
  @keyframes s1_L_out{0%{opacity:0}58%{opacity:1}90%{opacity:1}100%{opacity:0}}
  @keyframes s1_R_sub{0%{opacity:1}30%{opacity:1}34%{opacity:0}100%{opacity:0}}
  @keyframes s1_R_bgbox{0%{opacity:0}26%{opacity:0}30%{opacity:1}36%{opacity:1}40%{opacity:0}100%{opacity:0}}
  @keyframes s1_R_outbx{0%{opacity:0}70%{opacity:0}75%{opacity:1}95%{opacity:1}100%{opacity:0}}
  .s1-caption{ display:flex; justify-content:space-between; color:var(--muted); font-weight:700; margin:10px 2px 0; font-size:.92rem; }

  /* ====== å•å›¾ä½åŠ¨ç”» oneanimï¼ˆæ·¡å…¥ã€ä¸‰åˆ—è‡ªé€‚åº”ã€å¡ç‰‡é™åˆ¶å°ºå¯¸ï¼‰ ====== */
  .oneanim-grid{
    display:grid; gap:16px;
    grid-template-columns:repeat(3, minmax(0,1fr)); align-items:start;
  }
  @media (max-width: 900px){ .oneanim-grid{ grid-template-columns:repeat(2, minmax(0,1fr)); } }
  @media (max-width: 640px){ .oneanim-grid{ grid-template-columns:1fr; } }

  .oneanim-item{ display:flex; flex-direction:column; gap:8px; align-items:center; }

  .oneanim-card{
    --dur:12s;
    position:relative;
    width:100%; max-width:320px;            /* æ§åˆ¶æ¯å¼ å¡ç‰‡çš„æœ€å¤§å°ºå¯¸ */
    aspect-ratio:1/1;
    border:1px solid var(--border); border-radius:16px; overflow:hidden;
    background:#0f172a; box-shadow:var(--shadow);
  }
  @media (max-width:1200px){ .oneanim-card{ max-width:300px; } }
  @media (max-width:900px){  .oneanim-card{ max-width:280px; } }
  @media (max-width:640px){  .oneanim-card{ max-width:min(92vw,360px); } }

  .oneanim-layer{
    position:absolute; inset:0; background-size:cover; background-position:center; background-repeat:no-repeat;
    opacity:0; will-change:opacity;
  }
  .oneanim-card .step1-sub  { background-image:var(--sub);   animation:oa_step1 var(--dur) ease-in-out infinite; }
  .oneanim-card .step2-bg   { background-image:var(--bg);    animation:oa_step2 var(--dur) ease-in-out infinite; }
  .oneanim-card .step3-box  { background-image:var(--bgbox); animation:oa_step3 var(--dur) ease-in-out infinite; }
  .oneanim-card .step4-out  { background-image:var(--out);   animation:oa_step4 var(--dur) ease-in-out infinite; }

/* è®©æ¯ä¸ªæ­¥éª¤ä¹‹é—´æœ‰é‡å ï¼Œé¿å…ç©ºéš™ */
/* è®©ä¸‹ä¸€å¼ å›¾ç‰‡æå‰å¼€å§‹æ˜¾ç¤ºï¼Œä¸Šä¸€å¼ å»¶è¿Ÿæ¶ˆå¤± */
@keyframes oa_step1{0%{opacity:1}22%{opacity:1}28%{opacity:0}100%{opacity:0}}
@keyframes oa_step2{0%{opacity:0}20%{opacity:0}25%{opacity:1}50%{opacity:1}56%{opacity:0}100%{opacity:0}}
@keyframes oa_step3{0%{opacity:0}48%{opacity:0}53%{opacity:1}75%{opacity:1}81%{opacity:0}100%{opacity:0}}
@keyframes oa_step4{0%{opacity:0}73%{opacity:0}78%{opacity:1}98%{opacity:1}100%{opacity:1}}

  .oneanim-caption{ margin:0; text-align:center; color:var(--muted); font-weight:600; font-size:.92rem; }
  /* caption é«˜äº® */
  .oneanim-caption { margin:0; text-align:center; color:var(--muted); font-weight:600; font-size:.92rem; }
  .oneanim-caption span{ transition:color .25s ease, text-shadow .25s ease; }
  .oneanim-caption span.active{
    color: var(--blue);
    text-shadow: 0 0 10px rgba(96,165,250,.35);
}
/* ä¸“é—¨ç»™ç¬¬ 5 é¡µçš„å››è”å›¾ bundle æ”¹èƒŒæ™¯è‰² */
#multiref-x4 .bundle {
  background: #1e293b;  /* æ¯” #0f172a ç¨å¾®äº®ä¸€ç‚¹ */
  border: 1px solid #475569;  /* ç»™ä¸€ç‚¹æè¾¹ï¼Œå¢å¼ºåˆ†éš” */
}


/* ====== åŒ Subject 5 æ­¥åŠ¨ç”»ï¼ˆSubject1â†’Subject2â†’Backgroundâ†’ROIâ†’Outputï¼‰ ====== */
.oneanim5-grid{
  display:grid; gap:16px;
  grid-template-columns:repeat(3, minmax(0,1fr)); align-items:start;
}
@media (max-width: 900px){ .oneanim5-grid{ grid-template-columns:repeat(2, minmax(0,1fr)); } }
@media (max-width: 640px){ .oneanim5-grid{ grid-template-columns:1fr; } }

.oneanim5-item{ display:flex; flex-direction:column; gap:8px; align-items:center; }

/* å•å¡æ ·å¼ä¸ .oneanim-card ä¸€è‡´ï¼Œå¦èµ·ç±»åä»¥å…äº’ç›¸å½±å“ */
.oneanim5-card{
  --dur:12s;
  position:relative;
  width:100%; max-width:320px;
  aspect-ratio:1/1;
  border:1px solid var(--border); border-radius:16px; overflow:hidden;
  background:#0f172a; box-shadow:var(--shadow);
}
@media (max-width:1200px){ .oneanim5-card{ max-width:300px; } }
@media (max-width:900px){  .oneanim5-card{ max-width:280px; } }
@media (max-width:640px){  .oneanim5-card{ max-width:min(92vw,360px); } }

.oneanim5-layer{
  position:absolute; inset:0; background-size:cover; background-position:center; background-repeat:no-repeat;
  opacity:0; will-change:opacity;
}

/* 5 å±‚ç»‘å®šï¼šsub1 / sub2 / bg / box / out */
.oneanim5-card .step1-sub1 { background-image:var(--sub1); animation:oa5_step1 var(--dur) ease-in-out infinite; }
.oneanim5-card .step2-sub2 { background-image:var(--sub2); animation:oa5_step2 var(--dur) ease-in-out infinite; }
.oneanim5-card .step3-bg   { background-image:var(--bg);   animation:oa5_step3 var(--dur) ease-in-out infinite; }
.oneanim5-card .step4-box  { background-image:var(--bgbox);animation:oa5_step4 var(--dur) ease-in-out infinite; }
.oneanim5-card .step5-out  { background-image:var(--out);  animation:oa5_step5 var(--dur) ease-in-out infinite; }

@keyframes oa5_step1{
  0%{opacity:1}
  18%{opacity:1}    /* ä¿æŒåˆ° 20% */
  23%{opacity:0}    /* 20â†’26 æ·¡å‡º(6%) */
  100%{opacity:0}
}
@keyframes oa5_step2{
  0%{opacity:0}
  16%{opacity:0}    /* æ¯”ä¸Šä¸€æ­¥æ·¡å‡ºèµ·ç‚¹(20%) æ—© 2% å¼€å§‹æ·¡å…¥ */
  22%{opacity:1}    /* å®Œå…¨äº®èµ·ï¼Œå’Œ step1 çš„ 24â†’26 å°¾å·´é‡å  2% */
  38%{opacity:1}    /* ä¿æŒ */
  43%{opacity:0}    /* 44â†’50 æ·¡å‡º(6%) */
  100%{opacity:0}
}
@keyframes oa5_step3{
  0%{opacity:0}
  36%{opacity:0}    /* æ¯” step2 æ·¡å‡ºèµ·ç‚¹(44%) æ—© 2% æ·¡å…¥ */
  42%{opacity:1}    /* ä¸ step2 å°¾å·´ 48â†’50 é‡å  2% */
  60%{opacity:1}
  63%{opacity:0}
  100%{opacity:0}
}
@keyframes oa5_step4{
  0%{opacity:0}
  58%{opacity:0}    /* æ¯” step3 æ·¡å‡ºèµ·ç‚¹(68%) æ—© 2% æ·¡å…¥ */
  62%{opacity:1}    /* ä¸ step3 å°¾å·´ 72â†’74 é‡å  2% */
  80%{opacity:1}
  84%{opacity:0}
  100%{opacity:0}
}
@keyframes oa5_step5{
  0%{opacity:0}
  80%{opacity:0}    /* æ¯” step4 æ·¡å‡ºèµ·ç‚¹(92%) æ—© 2% æ·¡å…¥ */
  83%{opacity:1}    /* ä¸ step4 å°¾å·´ 96â†’98 é‡å  2% */
  100%{opacity:1}   /* æ”¶å°¾ä¿æŒ */
}



.oneanim5-caption{
  margin:0; text-align:center; color:var(--muted); font-weight:600; font-size:.92rem;
}
.oneanim5-caption span{ transition:color .25s ease, text-shadow .25s ease; }
.oneanim5-caption span.active{
  color: var(--blue);
  text-shadow: 0 0 10px rgba(96,165,250,.35);
}

</style>
</head>

<body>

<!-- Lightbox -->
<div class="lb" id="lb" aria-hidden="true">
  <img id="lb-img" alt="">
  <div class="lb-close" id="lb-close">Ã—</div>
</div>

<div class="snap-container" id="snapper">
  <!-- Hero Section -->
  <section class="snap hero-landing" id="home">
    <div class="hero-content">
      <img src="assets/logo.png" alt="Logo" class="hero-logo">
      <h1>ConsistCompose Dataset</h1>
      <p>Dataset Gallery of ConsistCompose Data</p>
      <div class="hero-buttons">
        <a href="#stats" class="btn">â— Explore</a>
        <a href="paper.pdf" class="btn">ğŸ“„ Paper</a>
        <a href="https://github.com/xxx" class="btn">ğŸ’» Code</a>
        <a href="dataset.zip" class="btn">ğŸ“‚ Dataset</a>
      </div>
    </div>
  </section>

  <!-- Page 2: STATS -->
  <section class="snap" id="stats">
    <div class="inner">
      <div class="card" style="padding:26px">
        <h2 class="section-title">Data Statistics</h2>
        <div class="stats-grid">
          <div class="card stat-card">
            <div class="stat-title" style="color:#fb72c3">Imagination</div>
            <div class="ring" data-color="#fb72c3" data-track="#3b3b44" data-value="37541" data-total="180000"></div>
          </div>
          <div class="card stat-card">
            <div class="stat-title" style="color:#5fb0ff">Multi-Reference</div>
            <div class="ring" data-color="#5fb0ff" data-track="#3b3b44" data-value="72729" data-total="180000"></div>
          </div>
          <div class="card stat-card">
            <div class="stat-title" style="color:#a78bfa">Instruction Following</div>
            <div class="ring" data-color="#a78bfa" data-track="#3b3b44" data-value="67958" data-total="180000"></div>
          </div>
        </div>
      </div>
    </div>
  </section>


  <!-- Page: Single Image Animation (x6) ä¸‰åˆ—è‡ªé€‚åº” -->
  <section class="snap" id="single-anim-grid">
    <div class="fullbleed">
      <h2 class="section-title">Single Reference</h2>
      <div class="oneanim-grid">

        <!-- ç”¨ oneanim-item æŠŠå¡ç‰‡å’Œè¯´æ˜ç»‘åœ¨ä¸€èµ·ï¼›å¤åˆ¶ 6 æ¬¡ï¼ŒæŒ‰éœ€æ›¿æ¢ URL -->
        <div class="oneanim-item">
          <div class="oneanim-card" 
          style="
            --sub:url('assets/single_ref/000098_info_input.jpg'); 
             --bg:url('assets/single_ref/000098_info_background.jpg'); 
          --bgbox:url('assets/single_ref/000098_info_background_annotated.jpg'); 
            --out:url('assets/single_ref/000098_info_output.jpg'); 
          --dur:8s;">
            <div class="oneanim-layer step1-sub"></div>
            <div class="oneanim-layer step2-bg"></div>
            <div class="oneanim-layer step3-box"></div>
            <div class="oneanim-layer step4-out"></div>
          </div>
            <div class="oneanim-caption">
            <span data-step="1">Subject</span> &nbsp;â†’&nbsp;
            <span data-step="2">Background</span> &nbsp;â†’&nbsp;
            <span data-step="3">ROI</span> &nbsp;â†’&nbsp;
            <span data-step="4">Output</span>
          </div>
        </div>

        <div class="oneanim-item">
          <div class="oneanim-card" 
          style="
            --sub:url('assets/single_ref/000345_info_input.jpg'); 
             --bg:url('assets/single_ref/000345_info_background.jpg'); 
          --bgbox:url('assets/single_ref/000345_info_background_annotated.jpg'); 
            --out:url('assets/single_ref/000345_info_output.jpg'); 
          --dur:8s;">
            <div class="oneanim-layer step1-sub"></div>
            <div class="oneanim-layer step2-bg"></div>
            <div class="oneanim-layer step3-box"></div>
            <div class="oneanim-layer step4-out"></div>
          </div>
            <div class="oneanim-caption">
            <span data-step="1">Subject</span> &nbsp;â†’&nbsp;
            <span data-step="2">Background</span> &nbsp;â†’&nbsp;
            <span data-step="3">ROI</span> &nbsp;â†’&nbsp;
            <span data-step="4">Output</span>
          </div>
        </div>

        <div class="oneanim-item">
          <div class="oneanim-card" 
          style="
            --sub:url('assets/single_ref/000350_info_input.jpg'); 
             --bg:url('assets/single_ref/000350_info_background.jpg'); 
          --bgbox:url('assets/single_ref/000350_info_background_annotated.jpg'); 
            --out:url('assets/single_ref/000350_info_output.jpg'); 
          --dur:8s;">
            <div class="oneanim-layer step1-sub"></div>
            <div class="oneanim-layer step2-bg"></div>
            <div class="oneanim-layer step3-box"></div>
            <div class="oneanim-layer step4-out"></div>
          </div>
            <div class="oneanim-caption">
            <span data-step="1">Subject</span> &nbsp;â†’&nbsp;
            <span data-step="2">Background</span> &nbsp;â†’&nbsp;
            <span data-step="3">ROI</span> &nbsp;â†’&nbsp;
            <span data-step="4">Output</span>
          </div>
        </div>

        <div class="oneanim-item">
          <div class="oneanim-card" 
          style="
            --sub:url('assets/single_ref/000067_info_input.jpg'); 
             --bg:url('assets/single_ref/000067_info_background.jpg'); 
          --bgbox:url('assets/single_ref/000067_info_background_annotated.jpg'); 
            --out:url('assets/single_ref/000067_info_output.jpg'); 
          --dur:8s;">
            <div class="oneanim-layer step1-sub"></div>
            <div class="oneanim-layer step2-bg"></div>
            <div class="oneanim-layer step3-box"></div>
            <div class="oneanim-layer step4-out"></div>
          </div>
          <div class="oneanim-caption">
            <span data-step="1">Subject</span> &nbsp;â†’&nbsp;
            <span data-step="2">Background</span> &nbsp;â†’&nbsp;
            <span data-step="3">ROI</span> &nbsp;â†’&nbsp;
            <span data-step="4">Output</span>
          </div>
        </div>

        <div class="oneanim-item">
          <div class="oneanim-card" 
          style="
            --sub:url('assets/single_ref/000072_info_input.jpg'); 
             --bg:url('assets/single_ref/000072_info_background.jpg'); 
          --bgbox:url('assets/single_ref/000072_info_background_annotated.jpg'); 
            --out:url('assets/single_ref/000072_info_output.jpg'); 
          --dur:8s;">
            <div class="oneanim-layer step1-sub"></div>
            <div class="oneanim-layer step2-bg"></div>
            <div class="oneanim-layer step3-box"></div>
            <div class="oneanim-layer step4-out"></div>
          </div>
          <div class="oneanim-caption">
            <span data-step="1">Subject</span> &nbsp;â†’&nbsp;
            <span data-step="2">Background</span> &nbsp;â†’&nbsp;
            <span data-step="3">ROI</span> &nbsp;â†’&nbsp;
            <span data-step="4">Output</span>
          </div>

        </div>

        <div class="oneanim-item">
          <div class="oneanim-card" 
          style="
            --sub:url('assets/single_ref/000012_info_input.jpg'); 
             --bg:url('assets/single_ref/000012_info_background.jpg'); 
          --bgbox:url('assets/single_ref/000012_info_background_annotated.jpg'); 
            --out:url('assets/single_ref/000012_info_output.jpg'); 
          --dur:8s;">
            <div class="oneanim-layer step1-sub"></div>
            <div class="oneanim-layer step2-bg"></div>
            <div class="oneanim-layer step3-box"></div>
            <div class="oneanim-layer step4-out"></div>
          </div>
          <div class="oneanim-caption">
            <span data-step="1">Subject</span> &nbsp;â†’&nbsp;
            <span data-step="2">Background</span> &nbsp;â†’&nbsp;
            <span data-step="3">ROI</span> &nbsp;â†’&nbsp;
            <span data-step="4">Output</span>
          </div>

        </div>

      </div>
    </div>
  </section>
<!-- Page 4: Image Wall -->
<section class="snap" id="multiref">
  <div class="fullbleed">
    <h2 class="section-title">Single Reference Image Wall</h2>

    <!-- 3 è¡Œå°„æµï¼Œç´ æç”± JS è‡ªåŠ¨æ³¨å…¥ -->
    <div class="ticker row-gap shoot demo-shoot" data-speed="200" data-gap="24"></div>
    <div class="ticker row-gap shoot demo-shoot" data-speed="190" data-gap="24"></div>
    <div class="ticker row-gap shoot demo-shoot" data-speed="180" data-gap="24"></div>
  </div>
</section>


<!-- Page: Double Subject Animation (x6) ä¸‰åˆ—è‡ªé€‚åº” -->
<section class="snap" id="double-anim-grid">
  <div class="fullbleed">
    <h2 class="section-title">Double Subject</h2>
    <div class="oneanim5-grid">

      <!-- å¡ç‰‡ 1 -->
      <div class="oneanim5-item">
        <div class="oneanim5-card"
          style="
            --sub1:url('assets/mult_ref/000081_img1.jpg');
            --sub2:url('assets/mult_ref/000081_img2.jpg');
              --bg:url('assets/mult_ref/000081_background.jpg');
           --bgbox:url('assets/mult_ref/000081_background_annotated.jpg');
             --out:url('assets/mult_ref/000081_output.jpg');
            --dur:10s;">
          <div class="oneanim5-layer step1-sub1"></div>
          <div class="oneanim5-layer step2-sub2"></div>
          <div class="oneanim5-layer step3-bg"></div>
          <div class="oneanim5-layer step4-box"></div>
          <div class="oneanim5-layer step5-out"></div>
        </div>
        <div class="oneanim5-caption">
          <span data-step="1">Sub 1</span> &nbsp;â†’&nbsp;
          <span data-step="2">Sub 2</span> &nbsp;â†’&nbsp;
          <span data-step="3">Background</span> &nbsp;â†’&nbsp;
          <span data-step="4">ROI</span> &nbsp;â†’&nbsp;
          <span data-step="5">Output</span>
        </div>
      </div>

      <!-- å¡ç‰‡ 2 -->
      <div class="oneanim5-item">
        <div class="oneanim5-card"
          style="
            --sub1:url('assets/mult_ref/000098_img1.jpg');
            --sub2:url('assets/mult_ref/000098_img2.jpg');
              --bg:url('assets/mult_ref/000098_background.jpg');
           --bgbox:url('assets/mult_ref/000098_background_annotated.jpg');
             --out:url('assets/mult_ref/000098_output.jpg');
            --dur:10s;">
          <div class="oneanim5-layer step1-sub1"></div>
          <div class="oneanim5-layer step2-sub2"></div>
          <div class="oneanim5-layer step3-bg"></div>
          <div class="oneanim5-layer step4-box"></div>
          <div class="oneanim5-layer step5-out"></div>
        </div>
        <div class="oneanim5-caption">
          <span data-step="1">Sub 1</span> &nbsp;â†’&nbsp;
          <span data-step="2">Sub 2</span> &nbsp;â†’&nbsp;
          <span data-step="3">Background</span> &nbsp;â†’&nbsp;
          <span data-step="4">ROI</span> &nbsp;â†’&nbsp;
          <span data-step="5">Output</span>
        </div>
      </div>

      <!-- å¡ç‰‡ 3 -->
      <div class="oneanim5-item">
        <div class="oneanim5-card"
          style="
            --sub1:url('assets/mult_ref/000120_img1.jpg');
            --sub2:url('assets/mult_ref/000120_img2.jpg');
              --bg:url('assets/mult_ref/000120_background.jpg');
           --bgbox:url('assets/mult_ref/000120_background_annotated.jpg');
             --out:url('assets/mult_ref/000120_output.jpg');
            --dur:10s;">
          <div class="oneanim5-layer step1-sub1"></div>
          <div class="oneanim5-layer step2-sub2"></div>
          <div class="oneanim5-layer step3-bg"></div>
          <div class="oneanim5-layer step4-box"></div>
          <div class="oneanim5-layer step5-out"></div>
        </div>
        <div class="oneanim5-caption">
          <span data-step="1">Sub 1</span> &nbsp;â†’&nbsp;
          <span data-step="2">Sub 2</span> &nbsp;â†’&nbsp;
          <span data-step="3">Background</span> &nbsp;â†’&nbsp;
          <span data-step="4">ROI</span> &nbsp;â†’&nbsp;
          <span data-step="5">Output</span>
        </div>
      </div>

      <!-- å¡ç‰‡ 4 -->
      <div class="oneanim5-item">
        <div class="oneanim5-card"
          style="
            --sub1:url('assets/mult_ref/000125_img1.jpg');
            --sub2:url('assets/mult_ref/000125_img2.jpg');
              --bg:url('assets/mult_ref/000125_background.jpg');
           --bgbox:url('assets/mult_ref/000125_background_annotated.jpg');
             --out:url('assets/mult_ref/000125_output.jpg');
            --dur:10s;">
          <div class="oneanim5-layer step1-sub1"></div>
          <div class="oneanim5-layer step2-sub2"></div>
          <div class="oneanim5-layer step3-bg"></div>
          <div class="oneanim5-layer step4-box"></div>
          <div class="oneanim5-layer step5-out"></div>
        </div>
        <div class="oneanim5-caption">
          <span data-step="1">Sub 1</span> &nbsp;â†’&nbsp;
          <span data-step="2">Sub 2</span> &nbsp;â†’&nbsp;
          <span data-step="3">Background</span> &nbsp;â†’&nbsp;
          <span data-step="4">ROI</span> &nbsp;â†’&nbsp;
          <span data-step="5">Output</span>
        </div>
      </div>

      <!-- å¡ç‰‡ 5 -->
      <div class="oneanim5-item">
        <div class="oneanim5-card"
          style="
            --sub1:url('assets/mult_ref/000217_img1.jpg');
            --sub2:url('assets/mult_ref/000217_img2.jpg');
              --bg:url('assets/mult_ref/000217_background.jpg');
           --bgbox:url('assets/mult_ref/000217_background_annotated.jpg');
             --out:url('assets/mult_ref/000217_output.jpg');
            --dur:10s;">
          <div class="oneanim5-layer step1-sub1"></div>
          <div class="oneanim5-layer step2-sub2"></div>
          <div class="oneanim5-layer step3-bg"></div>
          <div class="oneanim5-layer step4-box"></div>
          <div class="oneanim5-layer step5-out"></div>
        </div>
        <div class="oneanim5-caption">
          <span data-step="1">Sub 1</span> &nbsp;â†’&nbsp;
          <span data-step="2">Sub 2</span> &nbsp;â†’&nbsp;
          <span data-step="3">Background</span> &nbsp;â†’&nbsp;
          <span data-step="4">ROI</span> &nbsp;â†’&nbsp;
          <span data-step="5">Output</span>
        </div>
      </div>

      <!-- å¡ç‰‡ 6 -->
      <div class="oneanim5-item">
        <div class="oneanim5-card"
          style="
            --sub1:url('assets/mult_ref/000171_img1.jpg');
            --sub2:url('assets/mult_ref/000171_img2.jpg');
              --bg:url('assets/mult_ref/000171_background.jpg');
           --bgbox:url('assets/mult_ref/000171_background_annotated.jpg');
             --out:url('assets/mult_ref/000171_output.jpg');
            --dur:10s;">
          <div class="oneanim5-layer step1-sub1"></div>
          <div class="oneanim5-layer step2-sub2"></div>
          <div class="oneanim5-layer step3-bg"></div>
          <div class="oneanim5-layer step4-box"></div>
          <div class="oneanim5-layer step5-out"></div>
        </div>
        <div class="oneanim5-caption">
          <span data-step="1">Sub 1</span> &nbsp;â†’&nbsp;
          <span data-step="2">Sub 2</span> &nbsp;â†’&nbsp;
          <span data-step="3">Background</span> &nbsp;â†’&nbsp;
          <span data-step="4">ROI</span> &nbsp;â†’&nbsp;
          <span data-step="5">Output</span>
        </div>
      </div>

    </div>
  </div>
</section>



<!-- Page 6: Four-Image Wall -->
<section class="snap" id="multiref-x4">
  <div class="fullbleed">
    <h2 class="section-title">Multi-Reference Image Wall</h2>

    <!-- 3 è¡Œå°„æµï¼Œç´ æç”± JS è‡ªåŠ¨æ³¨å…¥ -->
    <div class="ticker row-gap shoot demo-shoot4" data-speed="200" data-gap="24"></div>
    <div class="ticker row-gap shoot demo-shoot4" data-speed="190" data-gap="24"></div>
    <div class="ticker row-gap shoot demo-shoot4" data-speed="180" data-gap="24"></div>
  </div>
</section>




</div>

<!-- å³ä¾§åˆ†é¡µç‚¹ -->
<div class="dots" id="dots"></div>

<script>
/* ===== 1) å³ä¾§åœ†ç‚¹ & åˆ†é¡µæ»šåŠ¨æ§åˆ¶ ===== */
const container = document.getElementById('snapper');
const sections = Array.from(document.querySelectorAll('section.snap'));
const dotsWrap = document.getElementById('dots');

let active = 0;
sections.forEach((_,i)=>{
  const d=document.createElement('div'); d.className='dot'; d.addEventListener('click',()=>go(i));
  dotsWrap.appendChild(d);
});
function mark(i){
  active=i;
  dotsWrap.querySelectorAll('.dot').forEach((el,idx)=>el.classList.toggle('active', idx===i));
}
function go(i){
  i=Math.max(0,Math.min(sections.length-1,i));
  sections[i].scrollIntoView({behavior:'smooth'});
  mark(i);
}
mark(0);

/* æ»šè½®/è§¦æ‘¸èŠ‚æµ */
let lock=0;
container.addEventListener('wheel',e=>{
  e.preventDefault();
  if(lock) return;
  lock=1;
  const dir = e.deltaY>0 ? 1 : -1;
  go(active+dir);
  setTimeout(()=>lock=0, 650);
},{passive:false});

/* é”®ç›˜ â†‘â†“ ç¿»é¡µ */
window.addEventListener('keydown',e=>{
  if(e.key==='ArrowDown' || e.key==='PageDown') go(active+1);
  if(e.key==='ArrowUp' || e.key==='PageUp') go(active-1);
});

/* ç›‘å¬æ»šåŠ¨ï¼ˆæ‰‹åŠ¨æ‹–åŠ¨æ—¶åŒæ­¥åœ†ç‚¹ï¼‰ */
const obs = new IntersectionObserver((ents)=>{
  ents.forEach(ent=>{
    if(ent.isIntersecting){
      const idx = sections.indexOf(ent.target);
      if(idx!==-1) mark(idx);
    }
  });
}, {root:container, threshold:.6});
sections.forEach(s=>obs.observe(s));

/* ===== 2) ç»Ÿè®¡ç¯å›¾ ===== */
function ring(el){
  const size = el.clientWidth;
  const c = document.createElement('canvas');
  c.width=c.height=size; el.appendChild(c);
  const ctx=c.getContext('2d');
  const color=el.dataset.color, track=el.dataset.track||'#333';
  const val=+el.dataset.value, total=+el.dataset.total;
  const pct = Math.max(0, Math.min(1, val/total));
  const cx=size/2, cy=size/2, r=size/2-14, lw=20;

  ctx.lineCap='round';
  ctx.lineWidth=lw;
  ctx.strokeStyle=track;
  ctx.beginPath(); ctx.arc(cx,cy,r,-Math.PI/2, 1.5*Math.PI); ctx.stroke();

  ctx.strokeStyle=color;
  ctx.beginPath(); ctx.arc(cx,cy,r,-Math.PI/2, -Math.PI/2 + 2*Math.PI*pct); ctx.stroke();

  const center=document.createElement('div');
  center.className='center';
  center.innerHTML = `${val.toLocaleString()}<small>Images</small>`;
  el.appendChild(center);
}
document.querySelectorAll('.ring').forEach(ring);

/* å†…é“¾é”šç‚¹å¹³æ»‘è·³è½¬ */
document.querySelectorAll('a[href^="#"]').forEach(a=>{
  a.addEventListener('click', e=>{
    const id = a.getAttribute('href').slice(1);
    const target = id && document.getElementById(id);
    if(target){
      e.preventDefault();
      const idx = Array.from(document.querySelectorAll('section.snap')).indexOf(target);
      if(idx >= 0) go(idx);
    }
  });
});

/* ===== Lightbox ===== */
const lb = document.getElementById('lb');
const lbImg = document.getElementById('lb-img');
function openLB(src){ lbImg.src = src; lb.classList.add('open'); }
function closeLB(){ lb.classList.remove('open'); lbImg.src = ''; }
document.getElementById('lb-close').addEventListener('click', closeLB);
lb.addEventListener('click', (e)=>{ if(e.target===lb) closeLB(); });
window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeLB(); });

/* ===== 3) å­å¼¹å¼æ»šåŠ¨ï¼ˆé€šç”¨ï¼šæ”¯æŒ .bundle æˆ– .tile ä½œä¸ºå•å…ƒï¼‰ ===== */
function initShootTicker(ticker){
  const track = ticker.querySelector('.track');
  const lane = document.createElement('div'); lane.className='lane'; ticker.appendChild(lane);

  const SPEED = +(ticker.dataset.speed || 180);
  const GAP   = +(ticker.dataset.gap   || 22);

  let units = track ? Array.from(track.querySelectorAll('.bundle')) : [];
  if(!units.length && track) units = Array.from(track.querySelectorAll('.tile'));
  if(!units.length && track) units = Array.from(track.children || []);
  if(!units.length) return;

  // å…ˆæ¢é’ˆæµ‹é«˜åº¦ï¼Œæ’‘å¼€å®¹å™¨
  (function setInitialHeight(){
    const probe = units[0].cloneNode(true);
    probe.style.visibility='hidden'; probe.style.position='absolute'; probe.style.left='-9999px';
    ticker.appendChild(probe);
    const h = probe.offsetHeight || probe.getBoundingClientRect().height || 260;
    ticker.style.setProperty('--shoot-h', h + 'px');
    probe.remove();
  })();

  let idx = 0, paused = false, destroyed = false;

  function readyToSpawn(){
    const last = lane.querySelector('.bolt:last-of-type');
    if(!last) return true;
    const lastRect = last.getBoundingClientRect();
    const tRect = ticker.getBoundingClientRect();
    const space = tRect.right - lastRect.right;
    return space >= GAP;
  }

  function spawn(){
    const node = units[idx++ % units.length].cloneNode(true);
    node.classList.add('bolt'); lane.appendChild(node);

    requestAnimationFrame(()=>{
      const w = node.offsetWidth || 260;
      const distance = ticker.clientWidth + w;
      const dur = distance / SPEED;
      node.style.setProperty('--w', w + 'px');
      node.style.animation = `bullet ${dur}s linear forwards`;
      node.addEventListener('animationend', ()=> node.remove());
      if (paused) node.style.animationPlayState = 'paused';
    });
  }

  function loop(){
    if (!destroyed){
      if (!paused && readyToSpawn()) spawn();
      requestAnimationFrame(loop);
    }
  }
  loop();

  ticker.addEventListener('mouseenter', ()=>{
    paused = true; lane.querySelectorAll('.bolt').forEach(b=> b.style.animationPlayState='paused');
  });
  ticker.addEventListener('mouseleave', ()=>{
    paused = false; lane.querySelectorAll('.bolt').forEach(b=> b.style.animationPlayState='running');
  });

  return ()=>{ destroyed = true; };
}

document.addEventListener('click', (e) => {
    const img = e.target.closest('.lane img, .bundle img, .tile img');
    if (img) {
      e.preventDefault();
      openLB(img.src);
    }
});
// document.querySelectorAll('.ticker[data-mode="shoot"]').forEach(initShootTicker);
/* ===== 4) å•å›¾ä½åŠ¨ç”»ï¼šæ–‡å­—é«˜äº®ä¸åŠ¨ç”»åŒæ­¥ï¼ˆå…¼å®¹ 4/5 æ­¥ï¼‰ ===== */
(function initOneAnimCaptions(){
  const getDurSec = (card)=>{
    const cs = getComputedStyle(card);
    let dur = cs.getPropertyValue('--dur').trim() || '12s';
    if(!dur || dur === '0s'){
      const layer = card.querySelector('[class*="layer"]');
      if(layer){
        const a = getComputedStyle(layer).animationDuration;
        if(a && a.endsWith('s')) dur = a;
      }
    }
    const n = parseFloat(dur);
    return isNaN(n) ? 12 : n;
  };

  // è‡ªåŠ¨æŠŠçº¯æ–‡æœ¬ caption åŒ…è£…ä¸º spanï¼ˆæ”¯æŒ 4 æˆ– 5 æ­¥ï¼‰
  document.querySelectorAll('.oneanim-caption, .oneanim5-caption').forEach(cap=>{
    if(!cap.querySelector('span')){
      const parts = cap.textContent.split('â†’').map(s=>s.trim()).filter(Boolean);
      if(parts.length === 4 || parts.length === 5){
        cap.innerHTML = parts.map((p,i)=>`<span data-step="${i+1}">${p}</span>`).join(' &nbsp;â†’&nbsp; ');
      }
    }
  });

  // ç»‘å®šæ‰€æœ‰ 4 æ­¥å¡ & 5 æ­¥å¡
  const allItems = [
    ...document.querySelectorAll('.oneanim-item'),
    ...document.querySelectorAll('.oneanim5-item')
  ];

  allItems.forEach(item=>{
    const card = item.querySelector('.oneanim-card, .oneanim5-card');
    const cap  = item.querySelector('.oneanim-caption, .oneanim5-caption');
    if(!card || !cap) return;

    const spans = cap.querySelectorAll('span[data-step]');
    if(!spans.length) return;

    const stepCount = spans.length;             // 4 æˆ– 5
    const dur = getDurSec(card);
    const stepDur = dur / stepCount;
    let step = 1;

    const highlight = (s)=>{
      spans.forEach(el=> el.classList.toggle('active', +el.dataset.step === s));
    };
    highlight(step);

    setInterval(()=>{
      step = (step % stepCount) + 1;
      highlight(step);
    }, stepDur * 1000);
  });
})();


/* ===== Build demo bundles for Multiâ€‘Reference (3 rows) ===== */

/** è¿™é‡Œåˆ—å‡ºä½ æœ‰çš„ demo idï¼ˆ5 å¼ å›¾ä¸ºä¸€ç»„ï¼‰ã€‚æƒ³åŠ å°±å¾€é‡Œå†™ */
const DEMO_IDS = [
"000005",
"000012",
"000035",
"000039",
"000040",
"000050",
"000052",
"000058",
"000061",
"000067",
"000072",
"000079",
"000080",
"000081",
"000082",
"000095",
"000098",
"000099",
"000105",
"000107",
"000112",
"000133",
"000136",
"000137",
"000145",
"000146",
"000164",
"000185",
"000304",
"000311",
"000314",
"000315",
"000345",
"000350"
];

/** æ ¹æ® id ç”Ÿæˆ 5 å¼ å›¾çš„ bundleï¼ˆèƒŒæ™¯ã€æ¡†ã€ä¸»ä½“ã€è¾“å‡ºã€è¾“å‡º+æ¡†ï¼‰ */
function createBundleNode(id){
  const wrap = document.createElement('div');
  wrap.className = 'bundle';
  wrap.innerHTML = `
    <div class="cell"><img src="assets/single_ref/${id}_info_input.jpg"                  alt="${id} input"></div>
    <div class="cell"><img src="assets/single_ref/${id}_info_background_annotated.jpg"   alt="${id} background annotated"></div>
    <div class="cell"><img src="assets/single_ref/${id}_info_output.jpg"                 alt="${id} output"></div>
  `;
  return wrap;
}

/** æŠŠ DEMO_IDS æŒ‰è½®å¾ªåˆ†é…åˆ° 3 è¡Œï¼Œæ³¨å…¥ä¸ºæ¯è¡Œçš„éšè— .track ç´ ææ±  */
(function buildMultiRefTracks(){
  const rows = Array.from(document.querySelectorAll('.ticker.demo-shoot'));
  if(!rows.length) return;

  // ç»™æ¯ä¸€è¡Œåˆ›å»º .track å®¹å™¨ï¼Œå¹¶è½®æµå¡å…¥ bundle
  rows.forEach(row => {
    const track = document.createElement('div');
    track.className = 'track';
    row.appendChild(track);
  });

  DEMO_IDS.forEach((id, i) => {
    const row = rows[i % rows.length];      // è½®å¾ªåˆ°ç¬¬ i è¡Œ
    const track = row.querySelector('.track');
    track.appendChild(createBundleNode(id));
  });

  // ç»™è¿™äº› ticker æ ‡æ³¨ data-mode="shoot"ï¼Œä»¥ä¾¿åé¢çš„åˆå§‹åŒ–é€»è¾‘è¯†åˆ«
  rows.forEach(row => row.dataset.mode = 'shoot');
  rows.forEach(initShootTicker);
})();

/** 4 å›¾ç‰ˆçš„ bundleï¼ˆåœ¨ 3 å›¾åŸºç¡€ä¸Šå¤šåŠ ä¸€å¼  background åŸå›¾ï¼‰ */

const DEMO_IDS_X4 = [
'000081',
'000088',
'000098',
'000099',
'000115',
'000120',
'000125',
'000142',
'000158',
'000164',
'000171',
'000172',
'000188',
'000197',
'000208',
'000217',
'000219',
  // æŒ‰éœ€å¾€ä¸‹åŠ 
];

/** ç”Ÿæˆ 4 å¼ å›¾çš„ bundle */
function createBundleNode4(id){
  const wrap = document.createElement('div');
  wrap.className = 'bundle';
  wrap.innerHTML = `
    <div class="cell"><img src="assets/mult_ref/${id}_img1.jpg"               alt="${id} input"></div>
    <div class="cell"><img src="assets/mult_ref/${id}_img2.jpg"          alt="${id} background"></div>
    <div class="cell"><img src="assets/mult_ref/${id}_background_annotated.jpg" alt="${id} annotated"></div>
    <div class="cell"><img src="assets/mult_ref/${id}_output.jpg"              alt="${id} output"></div>
  `;
  return wrap;
}

/** æ„å»ºç¬¬ 5 é¡µï¼ˆx4ï¼‰çš„å°„æµ */
(function buildMultiRefTracksX4(){
  const rows = Array.from(document.querySelectorAll('.ticker.demo-shoot4'));
  if(!rows.length) return;

  rows.forEach(row => {
    const track = document.createElement('div');
    track.className = 'track';
    row.appendChild(track);
  });

  DEMO_IDS_X4.forEach((id, i) => {
    const row = rows[i % rows.length];
    row.querySelector('.track').appendChild(createBundleNode4(id));
  });

  rows.forEach(row => row.dataset.mode = 'shoot');
  rows.forEach(initShootTicker);
})();

</script>
</body>
</html>
